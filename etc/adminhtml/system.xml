<?xml version="1.0"?>
<config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="urn:magento:module:Magento_Config:etc/system_file.xsd">
    <system>
        <section id="tax">
            <!-- TODO: Figure out how to make sure AvaTax module is handling translation of this/these group[s] and down. -->
            <group id="avatax" translate="label" sortOrder="6" showInDefault="1" showInWebsite="1" showInStore="1">
                <label>AvaTax Settings</label>
                <field id="enabled" translate="label" type="select" sortOrder="1000" showInDefault="1" showInWebsite="1" showInStore="1">
                    <label>Enable AvaTax</label>
                    <source_model>Magento\Config\Model\Config\Source\Yesno</source_model>
                </field>
                <field id="connection_settings_header" translate="label" type="label" sortOrder="1010" showInDefault="1" showInWebsite="1" showInStore="1">
                    <label><![CDATA[<strong>Connection Settings</strong>]]></label>
                    <depends>
                        <field id="enabled">1</field>
                    </depends>
                </field>
                <field id="live_mode" translate="label" type="select" sortOrder="1020" showInDefault="1" showInWebsite="1" showInStore="1">
                    <label>Mode</label>
                    <source_model>ClassyLlama\AvaTax\Model\Config\Source\Mode</source_model>
                    <depends>
                        <field id="enabled">1</field>
                    </depends>
                </field>
                <field id="production_account_number" translate="label" type="text" sortOrder="1030" showInDefault="1" showInWebsite="1" showInStore="1">
                    <label>Account Number (Production)</label>
                    <frontend_class>required-entry</frontend_class>
                    <depends>
                        <field id="enabled">1</field>
                        <field id="live_mode">1</field>
                    </depends>
                </field>
                <!-- TODO: Change this to a password? -->
                <field id="production_license_key" translate="label" type="text" sortOrder="1040" showInDefault="1" showInWebsite="1" showInStore="1">
                    <label>License Key (Production)</label>
                    <frontend_class>required-entry</frontend_class>
                    <depends>
                        <field id="enabled">1</field>
                        <field id="live_mode">1</field>
                    </depends>
                </field>
                <field id="production_company_code" translate="label" type="text" sortOrder="1050" showInDefault="1" showInWebsite="1" showInStore="1">
                    <label>Company Code (Production)</label>
                    <frontend_class>required-entry validate-length maximum-length-25</frontend_class>
                    <depends>
                        <field id="live_mode">1</field>
                    </depends>
                </field>
                <!-- TODO: Have an error if development or production credentials are not entered on config after save -->
                <field id="development_account_number" translate="label" type="text" sortOrder="1060" showInDefault="1" showInWebsite="1" showInStore="1">
                    <label>Account Number (Development)</label>
                    <frontend_class>required-entry</frontend_class>
                    <depends>
                        <field id="enabled">1</field>
                        <field id="live_mode">0</field>
                    </depends>
                </field>
                <!-- TODO: Change this to a password? -->
                <field id="development_license_key" translate="label" type="text" sortOrder="1070" showInDefault="1" showInWebsite="1" showInStore="1">
                    <label>License Key (Development)</label>
                    <frontend_class>required-entry</frontend_class>
                    <depends>
                        <field id="enabled">1</field>
                        <field id="live_mode">0</field>
                    </depends>
                </field>
                <field id="development_company_code" translate="label" type="text" sortOrder="1080" showInDefault="1" showInWebsite="1" showInStore="1">
                    <label>Company Code (Development)</label>
                    <frontend_class>required-entry validate-length maximum-length-25</frontend_class>
                    <depends>
                        <field id="enabled">1</field>
                        <field id="live_mode">0</field>
                    </depends>
                </field>

                <field id="data_mapping_header" translate="label" type="label" sortOrder="2000" showInDefault="1" showInWebsite="1" showInStore="1">
                    <label><![CDATA[<strong>Data Mapping</strong>]]></label>
                    <depends>
                        <field id="enabled">1</field>
                    </depends>
                </field>
                <!-- TODO: Possibly have a value that gets set after the first time a live mode customer is set and disable the ability to change this value -->
                <field id="customer_code_format" translate="label comment" type="select" sortOrder="2010" showInDefault="1" showInWebsite="1" showInStore="1">
                    <label>Customer Code Format</label>
                    <source_model>ClassyLlama\AvaTax\Model\Config\Source\CustomerCode</source_model>
                    <comment>Select a format for customers to be identified in AvaTax.  Once the integration is live, this setting should not be changed.</comment>
                    <depends>
                        <field id="enabled">1</field>
                    </depends>
                </field>
                <field id="sku_shipping" translate="label" type="text" sortOrder="2020" showInDefault="1" showInWebsite="1" showInStore="1">
                    <label>Shipping SKU</label>
                    <comment>The SKU sent to denote shipping costs.</comment>
                    <frontend_class>required-entry validate-length maximum-length-50</frontend_class>
                    <depends>
                        <field id="enabled">1</field>
                    </depends>
                </field>
                <field id="sku_gift_wrap_order" translate="label" type="text" sortOrder="2030" showInDefault="1" showInWebsite="1" showInStore="1">
                    <label>Gift Wrap Order SKU</label>
                    <comment>The SKU sent AvaTax to denote gift wrap order costs.</comment>
                    <frontend_class>required-entry validate-length maximum-length-50</frontend_class>
                    <depends>
                        <field id="enabled">1</field>
                    </depends>
                </field>
                <field id="sku_gift_wrap_item" translate="label" type="text" sortOrder="2040" showInDefault="1" showInWebsite="1" showInStore="1">
                    <label>Gift Wrap Items SKU</label>
                    <comment>The SKU sent AvaTax to denote gift wrap item costs.</comment>
                    <frontend_class>required-entry validate-length maximum-length-50</frontend_class>
                    <depends>
                        <field id="enabled">1</field>
                    </depends>
                </field>
                <field id="sku_gift_wrap_card" translate="label" type="text" sortOrder="2050" showInDefault="1" showInWebsite="1" showInStore="1">
                    <label>Gift Wrap Printed Card SKU</label>
                    <comment>The SKU sent to denote gift wrap printed card costs.</comment>
                    <frontend_class>required-entry validate-length maximum-length-50</frontend_class>
                    <depends>
                        <field id="enabled">1</field>
                    </depends>
                </field>
                <field id="sku_adjustment_positive" translate="label" type="text" sortOrder="2060" showInDefault="1" showInWebsite="1" showInStore="1">
                    <label>Adjustment Refund Sku</label>
                    <comment>The SKU sent to denote positive ajustments.</comment>
                    <frontend_class>required-entry validate-length maximum-length-50</frontend_class>
                    <depends>
                        <field id="enabled">1</field>
                    </depends>
                </field>
                <field id="sku_adjustment_negative" translate="label" type="text" sortOrder="2070" showInDefault="1" showInWebsite="1" showInStore="1">
                    <label>Adjustment Refund SKU</label>
                    <comment>The SKU sent to denote negative ajustments.</comment>
                    <frontend_class>required-entry validate-length maximum-length-50</frontend_class>
                    <depends>
                        <field id="enabled">1</field>
                    </depends>
                </field>
                <field id="location_code" translate="label" type="text" sortOrder="2080" showInDefault="1" showInWebsite="1" showInStore="1">
                    <label>Location Code</label>
                    <comment>Optional, unless outlet-based reporting is needed. Location code is a value assigned by some State jurisdictions that identifies a particular store location. These States may require tax liabilities to be broken out separately for each store Location.</comment>
                    <frontend_class>required-entry validate-length maximum-length-50</frontend_class>
                    <depends>
                        <field id="enabled">1</field>
                    </depends>
                </field>
                <field id="ref1" translate="label comment" type="select" sortOrder="2090" showInDefault="1" showInWebsite="1" showInStore="1">
                    <label>Attribute to send as ref1</label>
                    <source_model>ClassyLlama\AvaTax\Model\Config\Source\Product\Attributes</source_model>
                    <comment>Select a text type product attribute to be sent to AvaTax as ref1. Only the first 250 characters of this attribute will be sent to AvaTax.</comment>
                    <depends>
                        <field id="enabled">1</field>
                    </depends>
                </field>
                <field id="ref2" translate="label comment" type="select" sortOrder="2100" showInDefault="1" showInWebsite="1" showInStore="1">
                    <label>Attribute to send as ref2</label>
                    <source_model>ClassyLlama\AvaTax\Model\Config\Source\Product\Attributes</source_model>
                    <comment>Select a text type product attribute to be sent to AvaTax as ref1. Only the first 250 characters of this attribute will be sent to AvaTax.</comment>
                    <depends>
                        <field id="enabled">1</field>
                    </depends>
                </field>

                <field id="general_header" translate="label" type="label" sortOrder="3000" showInDefault="1" showInWebsite="1" showInStore="1">
                    <label><![CDATA[<strong>General Settings</strong>]]></label>
                    <depends>
                        <field id="enabled">1</field>
                    </depends>
                </field>
                <field id="use_business_identification_number" translate="label comment" type="select" sortOrder="3010" showInDefault="1" showInWebsite="1" showInStore="1">
                    <label>Submit VAT Number to AvaTax</label>
                    <source_model>Magento\Config\Model\Config\Source\Yesno</source_model>
                    <comment>Set this to yes if you need to consider VAT when calculating tax</comment>
                    <depends>
                        <field id="enabled">1</field>
                    </depends>
                </field>
                <field id="business_identification_number" translate="label comment" type="text" sortOrder="3020" showInDefault="1" showInWebsite="1" showInStore="1">
                    <label>VAT Number</label>
                    <config_path>tax/avatax_settings/business_identification_number</config_path>
                    <comment>VAT Number can also be found at GENERAL: General -> Store Information -> VAT Number</comment>
                    <depends>
                        <field id="enabled">1</field>
                        <field id="use_business_identification_number">1</field>
                    </depends>
                </field>
            </group>
            </group>
        </section>
    </system>
</config>
